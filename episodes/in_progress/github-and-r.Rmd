---
title: 'GitHub and R'
teaching: 10
exercises: 2
---

:::::::::::::::::::::::::::::::::::::: questions 

- What actually is github? 
- How is that even relevant for me?

::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::: objectives

- Learn how to setup git and GitHub in RStudio
- Learn how to use GitHub for backup, sharing, versioning and collaboration

::::::::::::::::::::::::::::::::::::::::::::::::

## What is GitHub?

You might have seen GitHub before. An integral part of writing code is googling
(and chatgpting) for a solution that kinda matches your problem, copying it, and
adjusting the code so it hopefully does what you need it to do.

A lot of the search results you get will go to StackOverflow, but many will end
up on GitHub. And when the chatbot can help you, it is partially because it has 
been trained on GitHub.

Git is a system for keeping track of different versions of code. 
And because code is just text, it works nicely with text as well, as long as it
is formatted in plain text.

You have a file on your computer. You save it, and use git to store _that_ version
in a `git-repo` on your computer. When you make changes, you add (commit) those
changes to the repo, and Git keeps track of all the changes for you. That is 
pretty neat.

What is even better is that you can push _all_ the changes you made to an
online repository, where your local changes will be stored as well. If something
bad happens to your computer, you have a backup, that you can pull down to a 
new computer.


# Interaktion med github i R-sammenhænge.

Der er mange detaljer. Dette er noten om hvordan man får sat sit Personal
Access Token (PAT) i RStudio.

## Update personal access token:

Det gøres lettest ved at bruge pakken `gitcreds`
```{r gitcreds-eksempel, eval = F}
install.packages("gitcreds")
library(gitcreds)
gitcreds_set()
```

Funktionen returnerer:
```{r setcreds-output, eval  =F }
1: Keep these credentials
2: Replace these credentials
3: See the password / token
```

Vælg "2" og paste dit PAT ind på prompten.

Hvor får du så et PAT? Det sker heromkring fra:


Det token får vi heromkring fra:

[https://github.com/settings/tokens](https://github.com/settings/tokens)



Vi har styr på hvordan vi går fra at have oprettet ting på github og til det
når til vores egen computer.

Hvad hvis vi starter på vores egen computer, og gerne vil have det op på github?


Initialiser projektet lokalt:

Sørg for, at du har en mappe på din computer, hvor projektet ligger. Navigér til mappen i terminalen, og kør:
bash
Kopier kode
git init
Tilføj alle filer:
bash
Kopier kode
git add .
Lav din første commit:
bash
Kopier kode
git commit -m "Initial commit"
Opret et nyt repository på din organisations-GitHub-side:

Gå til din organisations-GitHub-side, opret et nyt repository, og kopier URL’en til det.
Link det lokale projekt til din organisations-GitHub-side:

I terminalen, kør:
bash
Kopier kode
git remote add origin <URL_til_organisations_repo>
Skub derefter ændringerne til organisations-repoet:
bash
Kopier kode
git push -u origin main
Fork repoet fra organisations-GitHub til din personlige GitHub-side:

Gå til organisations-repoet på GitHub og vælg "Fork" for at oprette en kopi i din personlige GitHub-konto.
Opsæt et remote til dit personlige GitHub-repo på din computer:

Nu skal du have både origin og et nyt remote (for eksempel kaldet personal) for at holde styr på, hvor du skubber ændringer hen. Tilføj din personlige GitHub som en ekstra remote:
bash
Kopier kode
git remote add personal <URL_til_personlige_repo>
Push til din personlige GitHub-konto, hvis nødvendigt:

Hvis du ønsker, kan du skubbe til din personlige konto:
bash
Kopier kode
git push -u personal main
Nu er dit projekt sat op lokalt og findes på både din organisations- og din personlige GitHub-side




Some instructors will demo RStudio’s git integration at some point during the workshop. This often goes over very well, but there can be a few snags with the setup. First, RStudio may not know where to find git. You can specify where git is located in Tools > Global Options > Git/SVN; on Mac/Linux git is often in /usr/bin/git or /usr/local/bin/git and on Windows it is often in C:/Program Files (x86)/Git/bin/git.exe. If you don’t know where git is installed on someone’s computer, open a terminal and try which git on Mac/Linux, or where git or whereis git.exe on Windows. See Jenny Bryan’s instructions for more detail.

If Windows users select the option “Run Git from the Windows command prompt” while setting up Git Bash, RStudio will automatically find the git executable. If you plan to demo git in RStudio during your workshop, you should edit the workshop setup instructions to have the Windows users choose this option during setup.

Another common gotcha is that the push/pull buttons in RStudio are grayed out, even after you have added a remote and pushed to it from the command line. You need to add an upstream tracking reference before you can push and pull directly from RStudio; have your learners do git push -u origin master from the command line and this should resolve the issue.


I et repo har vi en primær linie af udvikling. Den kaldes i dag ofte for "main",
i gamle dage, indtil amerikanerne kom i tanker om deres arvesynd, kaldtes 
den for master. Om det betyder at vi ikke længere har masteruddannelser på universiteterne,
men i stedet main-uddannelser, er der ingen der ved.

Ud fra denne master, er der branches. Forgreninger. disse forgreninger repræsenterer
forskellige, samtidige, sæt af udviklinger. Du arbejder i en branch, jeg arbejder 
i en anden. Det tillader os at arbejde på projektet parallelt. Det er praktisk og 
effektivt.

Når vi i vores branch har lavet noget arbejde, noget korde, committer vi det.
Det er et snapshot af hvordan koden ser ud på et bestemt tidspunkt. Hver
commit indeholder ændringerne til koden siden sidste commit, og bygger videre
på udviklingen. 
Hvert commit får sin egen kode, en hash. en kombination af bogstaver og tal,
der unikt identificerer denne commit.

Undertiden har vi brug for at markere særlige begivenheder i koden. Det gør vi
med tags. Det kan være at vi nu synes der er sket så meget, at det er en ny
version. Eller at det er et meget vigtigt commit der er blevet lavet.

Head, eller hovedet af vores branch, er den seneste udgave - det seneste commit
af den branch vi pt. arbejder med. Når du arbejder med en bestemt branch,
er head der hvor du er nu, efter din seneste commit.

Staging.

Når vi arbejder med vores kode, har vi den normalt lokalt på vores computer.
Vi retter og justerer og alt sådan. Og når vi er glade og fornøjede med
indholdet af en fil, tilføjer vi den. Adder den, til vores "staging area", hvor
vi samler vores arbejde. Det er der filerne står klar, og venter på at blive 
committed til vores git repository. Det er vores "pre-commit" område.

I rstudio sker tingene ofte automatisk, men vil vi manuelt tilføje en
fil til dette staging area, skriver vi "git add". og filnavnet. Så tilføjes
filen til staging area, og git holder øje med den. Vi kan også fjerne den igen
ved at køre "git remove". 

Vores lokale repository er det vi har på vores computer. Når vi har noget 
i vores staging area vil vil tilføje dertil, kører vi en commit. Ændringerne
går nu fra staging area, ind i vores lokale repo.

Vi har også, normalt, et remote repository. Det er det der ligger et andet sted 
end på vores computer. Typisk github, men det kunen være andre steder.

Når vi har ændringer i vores lokale repo, som vi vil have sendt til det remote,
kører vi git push. Det pusher vores ændringer op til det fjerne, centrale repo.

Er der ændringer på det centrale, som vi mangler lokalt, det kunne være der var 
en kollega der havde lavet ting, kører vi git pull. Det trækker ændringerne ned
til os lokalt.

Når vi starter, skal vi starte et sted. Og det er normalt lokalt. Vi forker eller 
cloner et eksisterende repo, og har det nu i et lokalt workspace. Det kan også
være vi starter helt fra bunden. I så fald kører vi "git init".

Så. Vi trækker fra et remote repo ned til vores workspace. I vores workspace
ændrer vi ting. kører git add for at placere filerne i staging area. og git remove
eller git reset for at fjerne ændringer. Når vi har ting i vores staging area,
kan vi køre git commit, for at placere ændringeren i vores lokale repo. og 
så kører vi git push for at sende ændringerne tilbage til det remote repo. 
eller git fetch / git pull for at opdatere vores lokale repo fra det remote.

Vi skal fortælle hvem vi er. og i stedet for at gøre det hver gang, kører vi
git config --global credential.helper store, der beder om navn, email og password.
Så bliver det brug igen og igen.

Hvis vi vil tjekke hvad der er kan vi køre 
git config --global credential.helper for at se hvad vi har gemt.

Der var noget med branches. Vi kunne lave branches fra main eller master. 
Hvis vi vil vide hvilken branch vi er på, kører vi git branch.

Hvis vi vil lave en branch, kan vi gøre det med
git branch og-så-navnet-på-vores-nye-branch.

hvis vi har mere end en, kan vi skifte mellem dem.

git chekcout.
er vi dovne, kan vi lave en og skifte til den med det samme.
git checkout -b og-så-navnet

Hvis vi vil vide hvad status er_
git status

Så får vi en liste over hvilke filer vi har ændret, men som ikke er staged
for commit. Og hvilken branch vi er på, og om den er opdateret osv.


Når vi committer skal vi altid give en lille besked. Den skal være meningsfuld,
og forklare hvad vi har lavet. Fald ikke for fristelsen til bare at give en 
meningsløs kommentar. Du vil fortryde det hvis du skal lede efter fejl...

git commit -m "og noget der giver mening"

Hvis vi falder over en tastefejl umiddelbart efter vi har committet. Så kan vi
ammende. 
git add .
cit commit --amend.

Så laver vi ikke en ny commit, men retter den lige før.

Commit ofte. 

Rebasing and merging.

Conflicts

Der er forskellige workflows. Der er ikke et bedste workflow.

feature branch workflow.
Hver ny feature eller fejlretning sker i sin egen branch. Og når den er på 
plads, merges den tilbage i main. Det isolerer ændringerne, og reducerer 
konflikter. Men det kræver at man holder tungen lige i munden når man
administrerer sine branches.

Gitflow workflow
Vi etablerer et antal branches, der lever længe. I feature branch tilgange,
lever de enkelte branches ikke så længe. Her har vi "main" "develop", "features"
"release" etc. Det er nyttigt når man har en ide om hvornår man offentliggør en
ny version, eller når der skal vedligeholdes over lange perioder.
Men det er ret tungt for små teams.

forking workflow
Hver udvikler laver sin egen fork af main. men i stedet for at pushe ændringer
direkte til main, pusher man til sin egen fork. Så laver man pull requests på
main, hvor man foreslår ændringer, og nogen trækker dem så ind. Det understøtter
code review og samarbejde før man merger til main.
Det er den måde vi arbejder på her.
Det opfordrer til at eksterne samarbejdspartnere kan bidrage, uden at man 
skal give dem rettigheder til main.
Men det kan være en udfordring at holde ens lokale forks opdateret. Det er 
der det ofte er bøvlet for os.

pull request workflow
Ligner forking workflow. Men i stedet laver man branches direkte i main. 
Det fremmer code review og samarbejde. men det kan også forsinke ting.

Trunk based 
Udvikling sker direkte på main. Det giver hurtige iterationer, og skaber fokus p¨
små hyppige ændringer.
Men kræver at man, gerne automatisk, tester om tingene faktisk virker, så main
ikke bliver ustabil.

Fork?


Git Cheatsheet


# Clone a Repository
git clone <repository_url>

# Stage Changes for Commit
git add <file(s)>

# Commit Changes
git commit -m "Commit message"

# Push Changes to the Remote Repository
git push

# Force Push Changes (use with caution)
git push --force

# Reset Working Directory to Last Commit
git reset --hard

# Create a New Branch
git branch <branch_name>

# Switch to a Different Branch
git checkout <branch_name>

# Merge Changes from Another Branch
git merge <branch_name>

# Rebase Changes onto Another Branch (use with caution)
git rebase <base_branch>

# View Status of Working Directory
git status

# View Commit History
git log

# Undo Last Commit (use with caution)
git reset --soft HEAD^

# Discard Changes in Working Directory
git restore <file(s)>

# Retrieve Lost Commit References
git reflog

# Interactive Rebase to Rearrange Commits
git rebase --interactive HEAD~3

# Pull changes from remote repo
git pull <remote_name> <branch_name>

# Fetch changes from remote repo 
git fetch <remote_name>



::::::::::::::::::::::::::::::::::::: keypoints 

- GitHub is the standard way for writing code collaboratively
- Be careful about data - not everything belongs on GitHub


::::::::::::::::::::::::::::::::::::::::::::::::

